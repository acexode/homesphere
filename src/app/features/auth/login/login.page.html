<ion-content class="ion-padding login-content">
  <div class="login-container">
    <div class="logo-section">
      <ion-img src="assets/images/logo.svg" class="app-logo"></ion-img>
      <h1 class="text-h1">Welcome Back</h1>
      <p class="text-body ion-text-center subtitle">Sign in to your community</p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="login-form">
      <div class="input-group">
        <ion-label class="input-label">Email</ion-label>
        <ion-input
          formControlName="email"
          type="email"
          placeholder="your@email.com"
          class="custom-input"
          [class.input-error]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
        ></ion-input>
        <ion-text color="danger" class="error-text" *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
          <small>Please enter a valid email</small>
        </ion-text>
      </div>

      <div class="input-group">
        <ion-label class="input-label">Password</ion-label>
        <ion-input
          formControlName="password"
          [type]="showPassword ? 'text' : 'password'"
          placeholder="Enter your password"
          class="custom-input"
          [class.input-error]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
        >
          <ion-button fill="clear" slot="end" (click)="togglePassword()" type="button">
            <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
          </ion-button>
        </ion-input>
        <ion-text color="danger" class="error-text" *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
          <small>Password is required</small>
        </ion-text>
      </div>

      <div class="forgot-password">
        <ion-button fill="clear" size="small" routerLink="/auth/forgot-password">Forgot Password?</ion-button>
      </div>

      <ion-button expand="block" type="submit" class="login-button" [disabled]="loginForm.invalid || loading">
        <ion-spinner name="crescent" *ngIf="loading"></ion-spinner>
        <span *ngIf="!loading">Sign In</span>
      </ion-button>

      <ion-button
        expand="block"
        fill="outline"
        class="biometric-button"
        (click)="loginWithBiometrics()"
        *ngIf="biometricsAvailable"
        type="button"
      >
        <ion-icon name="finger-print-outline" slot="start"></ion-icon>
        Sign in with Biometrics
      </ion-button>
    </form>

    <div class="register-section">
      <p class="text-small">Don't have an account?</p>
      <ion-button fill="clear" routerLink="/auth/register">Register Now</ion-button>
    </div>
  </div>
</ion-content>
